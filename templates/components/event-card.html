{% load wagtailimages_tags %}

<article class="event-card card-gh">
    {% if event.cover_image %}
        {% image event.cover_image fill-400x225 as cover %}
        <img src="{{ cover.url }}" alt="{{ event.title }}" class="w-full h-48 object-cover">
    {% endif %}

    <div class="card-gh-body p-gh-6">
        <h3 class="text-xl font-semibold mb-2 text-gh-neutral-emphasis dark:text-white">
            <a href="{{ event.url }}" class="hover:text-gh-accent-fg dark:hover:text-gh-accent-muted">{{ event.title }}</a>
        </h3>

        <div class="flex items-center space-x-3 mb-4">
            <span class="badge-gh {% if event.status == 'in_progress' or event.status == 'registration_open' %}badge-gh-success{% elif event.status == 'completed' %}badge-gh-danger{% else %}badge-gh-warning{% endif %}">
                {{ event.get_status_display }}
            </span>

            {% if event.status == 'in_progress' or event.status == 'registration_open' %}
                {% include "components/countdown-timer.html" with end_date=event.get_current_phase.end_date only %}
            {% endif %}
        </div>

        <div class="flex items-center justify-between text-sm text-gh-neutral-muted dark:text-gh-neutral-muted">
            <div class="flex items-center space-x-4">
                <div class="flex items-center">
                    <span class="mr-1">ğŸ‘¥</span>
                    <span>{{ event.teams.count }} teams</span>
                </div>
                <div class="flex items-center">
                    <span class="mr-1">ğŸ“…</span>
                    <span>{{ event.first_published_at|date:"M d" }}</span>
                </div>
            </div>

            <a href="{{ event.url }}" class="btn-gh btn-gh-primary">View Details</a>
        </div>
    </div>
</article>

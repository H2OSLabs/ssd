@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    // CSS Custom Properties for Theme Switching
    :root {
        --fgColor-default: #1f2328;
        --fgColor-muted: #57606a;
        --fgColor-accent: #0969da;
        --bgColor-default: #ffffff;
        --bgColor-muted: #f6f8fa;
        --borderColor-default: #d1d9e0;
    }

    .dark {
        --fgColor-default: #e6edf3;
        --fgColor-muted: #8d96a0;
        --fgColor-accent: #4493f8;
        --bgColor-default: #0d1117;
        --bgColor-muted: #161b22;
        --borderColor-default: #3d444d;
    }

    // TODO load fonts
    // @font-face {
    //     font-family: "Source Sans 3", sans-serif;
    //     font-optical-sizing: auto;
    //     font-weight: 400;
    //     font-style: normal;
    //     font-display: swap;
    //     src: url('../fonts/SourceSans3-variable.woff2') format('woff2-variable');
    // }
    // @font-face {
    //     font-family: "Source Serif 4", serif;
    //     font-optical-sizing: auto;
    //     font-weight: 400;
    //     font-style: normal;
    //     font-display: swap;
    //     src: url('../fonts/SourceSerif4-variable.woff2') format('woff2-variable');
    // }
    // @font-face {
    //     font-family: "Source Code Pro", monospace;
    //     font-optical-sizing: auto;
    //     font-weight: 400;
    //     font-style: normal;
    //     font-display: swap;
    //     src: url('../fonts/SourceSerif4-variable.woff2') format('woff2-variable');
    // }

    html {
        @apply font-sans3 font-normal not-italic;
        font-optical-sizing: auto;

        // Smooth theme transitions - target only elements that use CSS custom properties
        &.theme-transitioning {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;

            body,
            .btn-gh,
            .card-gh,
            .badge-gh {
                transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
            }
        }
    }

    body {
        @apply flex flex-col min-h-screen text-mackerel-400 dark:text-white bg-white dark:bg-mackerel-400 overflow-x-hidden;
    }

    a,
    button,
    input,
    select {
        &:focus-visible {
            @apply outline-mackerel-300 outline-[3px] outline-offset-4;
        }
    }
}

@layer components {
    // Three-Pane Layout
    .three-pane-layout {
        .navigation-sidebar {
            @apply bg-gh-bg-default border-r border-gh-border-default;
            transition: width 0.3s ease-in-out;
            flex-shrink: 0;
        }

        .content-main {
            @apply bg-gh-bg-default;
        }

        .detail-sidebar {
            @apply bg-gh-bg-muted w-80;
            flex-shrink: 0;
        }
    }

    .site-padding {
        @apply px-6 sm:px-10 md:px-28 lg:px-40;
    }

    .site-container {
        @apply max-w-[1512px] mx-auto;
    }

    .rich-text {
        @apply text-lg md:text-xl;

        h3 {
            @apply text-2xl md:text-3xl font-medium leading-[150%] pt-7 mb-8 md:mb-10;
        }

        p {
            @apply leading-7 mb-8 md:mb-10 last:mb-0;
        }

        a {
            @apply underline underline-offset-8 decoration-[1.5px] decoration-mackerel-200 hover:decoration-mackerel-300;

        }

        ol {
            @apply list-decimal list-outside ml-5;

            li {

                &:last-child {
                    @apply mb-5;
                }
            }
        }

        ul {
            @apply list-disc list-outside ml-5;

            li {
                &:last-child {
                    @apply mb-5;
                }
            }
        }
    }
    // Controls the animation of the menu toggle button (hamburger to cross icon tranisition)
    .button-menu-toggle {
        position: relative;
        display: block;
        width: 25px;
        height: 18px;
        background: transparent;
        border: 0;
        transform: rotate(0deg);
        transition: 0.25s ease-out;
        margin: auto;

        &__line {
            @apply bg-mackerel-400 dark:bg-white;
            position: absolute;
            display: block;
            width: 100%;
            height: 2px;
            transform: rotate(0deg);
            transition: top, transform, color, 0.25s ease-out;

            &:nth-child(1) {
                top: 2px;

                .mobile-menu-is-open & {
                    @apply bg-white;
                    transform: rotate(45deg);
                }
            }

            &:nth-child(2) {
                .mobile-menu-is-open & {
                    @apply bg-white;
                    top: 2px;
                    transform: rotate(-45deg);
                }
            }
        }
    }
    .header-logo {
        transition: color, 0.25s ease-out;

        &.mobile-menu-is-open {
            @apply text-white;
        }
    }

    // GitHub-style Button Components
    .btn-gh {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        font-size: 0.875rem;
        font-weight: 500;
        border-radius: 6px;
        border: 1px solid;
        transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out;

        &:focus-visible {
            outline: 2px solid;
            outline-offset: 2px;
        }

        &-primary {
            background-color: var(--fgColor-accent);
            color: var(--bgColor-default);
            border-color: var(--fgColor-accent);

            &:hover {
                background-color: color-mix(in srgb, var(--fgColor-accent) 85%, black);
            }

            &:focus-visible {
                outline-color: var(--fgColor-accent);
            }
        }

        &-secondary {
            background-color: var(--bgColor-default);
            color: var(--fgColor-default);
            border-color: var(--borderColor-default);

            &:hover {
                background-color: var(--bgColor-muted);
            }

            &:focus-visible {
                outline-color: var(--fgColor-accent);
            }
        }

        &-danger {
            background-color: #d1242f;
            color: var(--bgColor-default);
            border-color: #d1242f;

            &:hover {
                background-color: #a0111e;
            }

            &:focus-visible {
                outline-color: #d1242f;
            }
        }

        &-invisible {
            background-color: transparent;
            color: var(--fgColor-default);
            border-color: transparent;

            &:hover {
                background-color: var(--bgColor-muted);
            }

            &:focus-visible {
                outline-color: var(--fgColor-accent);
            }
        }
    }

    // GitHub-style Card Component
    .card-gh {
        background-color: var(--bgColor-default);
        border: 1px solid var(--borderColor-default);
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 1px 3px rgba(31, 35, 40, 0.12), 0 8px 24px rgba(66, 74, 83, 0.12);
        transition: box-shadow 0.2s ease-in-out;

        &:hover {
            box-shadow: 0 4px 7px rgba(31, 35, 40, 0.15), 0 12px 32px rgba(66, 74, 83, 0.15);
        }

        &-header {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--borderColor-default);
            background-color: var(--bgColor-muted);
        }

        &-body {
            padding: 0.75rem 1rem;
        }

        &-footer {
            padding: 0.75rem 1rem;
            border-top: 1px solid var(--borderColor-default);
            background-color: var(--bgColor-muted);
        }
    }

    // GitHub-style Badge Components
    .badge-gh {
        display: inline-flex;
        align-items: center;
        padding: 0.25rem 0.5rem;
        font-size: 0.75rem;
        font-weight: 500;
        border-radius: 9999px;
        border: 1px solid;

        &-success {
            background-color: #dafbe1;
            color: #1a7f37;
            border-color: #4ac26b;
        }

        &-danger {
            background-color: #ffebe9;
            color: #d1242f;
            border-color: #ff6a7a;
        }

        &-warning {
            background-color: #fef3c7;
            color: #92400e;
            border-color: #fcd34d;

            .dark & {
                background-color: #78350f;
                color: #fef3c7;
                border-color: #b45309;
            }
        }

        &-hacker {
            background-color: #f3e8ff;
            color: #6b21a8;
            border-color: #d8b4fe;

            .dark & {
                background-color: #581c87;
                color: #f3e8ff;
                border-color: #7e22ce;
            }
        }

        &-hipster {
            background-color: #fce7f3;
            color: #9f1239;
            border-color: #f9a8d4;

            .dark & {
                background-color: #831843;
                color: #fce7f3;
                border-color: #be185d;
            }
        }

        &-hustler {
            background-color: #dbeafe;
            color: #1e40af;
            border-color: #93c5fd;

            .dark & {
                background-color: #1e3a8a;
                color: #dbeafe;
                border-color: #2563eb;
            }
        }
    }
}
